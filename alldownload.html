<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Video Downloader - The Rebel Squad</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans">

  <!-- Header -->
  <header class="bg-black/90 shadow-md border-b border-yellow-500 p-4 text-center">
    <h1 class="text-2xl font-bold text-yellow-400">üî• Video Downloader üî•</h1>
    <p class="text-gray-400">Paste any video URL (Facebook, YouTube, TikTok, etc.)</p>
  </header>

  <!-- Form -->
  <section class="py-10 px-4 text-center">
    <form id="video-form" class="flex flex-col md:flex-row justify-center items-center gap-2">
      <input type="url" id="video-url" placeholder="Enter video URL..." class="p-3 rounded text-black w-full md:w-1/2" required>
      <button type="submit" class="bg-yellow-400 text-black font-bold px-6 py-2 rounded">Get Video</button>
    </form>

    <!-- Results -->
    <div id="video-links" class="mt-8 flex flex-col items-center space-y-6"></div>
  </section>

  <!-- Footer -->
  <footer class="bg-black text-gray-500 text-sm text-center py-4 border-t border-yellow-500">
    ¬© 2025 The Rebel Squad - All Rights Reserved
  </footer>

<script>
  const form = document.getElementById("video-form");
  const videoLinks = document.getElementById("video-links");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const url = document.getElementById("video-url").value.trim();
    if (!url) return alert("‚ö†Ô∏è Please enter a video URL");

    videoLinks.innerHTML = `<p class="text-gray-300">Fetching download links...</p>`;

    try {
      // ‚úÖ API call
      const response = await fetch(`https://nayan-video-downloader.vercel.app/alldown?url=${encodeURIComponent(url)}`);
      const data = await response.json();

      console.log("API Response:", data); // Debugging

      if (data.status && data.data) {
        const video = data.data;
        videoLinks.innerHTML = `
          <div class="bg-gray-900 p-6 rounded-lg shadow-md w-full md:w-2/3 lg:w-1/2">
            <h2 class="text-yellow-400 text-xl font-bold mb-3">${video.title || "Video"}</h2>
            <img src="${video.thumbnail}" alt="Thumbnail" class="rounded mb-4 mx-auto">
            <div class="flex justify-center gap-4">
              <a href="${video.low}" target="_blank" class="bg-yellow-400 text-black font-bold px-4 py-2 rounded">Download Low</a>
              <a href="${video.high}" target="_blank" class="bg-yellow-400 text-black font-bold px-4 py-2 rounded">Download High</a>
            </div>
          </div>
        `;
      } else {
        videoLinks.innerHTML = `<p class="text-red-500">‚ùå Failed to fetch video. Invalid URL or private video.</p>`;
      }
    } catch (err) {
      console.error(err);
      videoLinks.innerHTML = `<p class="text-red-500">üö® Error fetching video. Try again later.</p>`;
    }
  });
</script>

</body>
</html>
